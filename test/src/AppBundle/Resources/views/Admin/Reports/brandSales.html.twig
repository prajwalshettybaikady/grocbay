{% extends '@AppBundle/'~ myExtend ~'/base.html.twig' %}
{% block styles %}

{% endblock %}
{% block body %}
<div id="order-report-app">
    <!-- ============================================================== -->
    <!-- Start Page Content -->
    <!-- ============================================================== -->

      <!-- Javascript -->
      <script>
         $(function() {
            $( "#datepicker1" ).datepicker({
                  dateFormat:"dd-mm-yy",
            });
            $( "#datepicker2" ).datepicker({
                  dateFormat:"dd-mm-yy",
            });

         });
      </script>
    <div class="row">
        <div class="col-lg-12 col-md-12">
            <div class="card card-default">
                <div class="card-body collapse show"> 
                    {# <h6 id="reportheader">{% if filtertype == 'filterbyitem' %}Item{% elseif filtertype == 'filterbyitem' %}Brand{% endif %} Report Filter</h6> #}
                    <h6 id="reportheader">Brand Report Filter</h6>
                    <hr>
                    <form method="post" action="{{ path('filter_brands')}}">
                    <div class="row">
                        <div class="col-md-6">
                                <label for="">From</label>
                            <input type="text" name="fromDate" id="datepicker1"  class="form-control" autocomplete="off"  value="{{ from }}">
                        </div>
                        <div class="col-md-6">
                            <label for="">To</label>
                            <input type="text" name="toDate" id="datepicker2" class="form-control"  autocomplete="off" value="{{ to }}">
                        </div>
                    </div>

                    {# <div class="row" style="margin-top: 10px;">
                        <div class="col-md-2">
                            <label for="">Filter By Items</label>
                            <input type="radio" class="" name="filterby" id="filterby" value="filterbyitem" onclick="filterBy(this)" {% if filtertype == 'filterbyitem' %} checked {% endif %}/>
                        </div>
                         <div class="col-md-2">
                            <label for="">Filter By Brands</label>
                            <input type="radio" class="" name="filterby" id="filterby" value="filterbybrand" onclick="filterBy(this)" {% if filtertype == 'filterbybrand' %} checked {% endif %}/>
                        </div>
                    </div> #}

                     <div class="row m-t-20" id="brandid">
                        <div class="col-md-12">
                            <label for="">Brands</label>
                            <select name="brand" id="brand" class="form-control">
                                <option value="0">All</option>
                                {% for brand in brands%}
                                <option value="{{ brand.id }}" {% if brandid == brand.id %} selected {% endif %}>{{ brand.categoryName }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <br>
                    <div class="row m-t-20">
                        <div class="col-md-12">
                            <button class="btn btn-primary" type="submit" name="filter">Filter</button>
                       
                        </div>
                    </div>
                </div>
            </form>
            </div>
        </div>
        <div class="col-lg-12 col-md-12">
            <div class="card card-default">
                <div class="card-header">
                    <div class="card-actions">
                        <a class="btn-minimize" data-action="expand"><i class="mdi mdi-arrow-expand"></i></a>                    </div>
                    {# <h4 class="card-title m-b-0" id="headertext">{% if filtertype == 'filterbyitem' %}Itemwise{% elseif filtertype == 'filterbybrand' %}Brandwise{% endif %} Sales Report
                    </h4> #}
                     <h4 class="card-title m-b-0" id="headertext">Brandwise Sales Report
                    </h4>
                    <table class="table table-hovered" id="myTable">
                        <thead>
                            <tr>
                                <td>#</td>
                                <td id="tableheadertext">Brand Name</td>
                                {# {% if filtertype == 'filterbyitem' %}
                                    <td id="tableheadertext">Item Name</td>
                                {% elseif filtertype == 'filterbybrand' %}
                                    <td id="tableheadertext">Brand Name</td>
                                {% endif %} #}
                                <td>Quantity</td>
                                <td>Total</td>
                                <td>Action</td>
                            </tr>
                        </thead>
                        <tbody>
                            {% set count = 1 %}
                            {% set sales = 0 %}
                            {% for da in data %}
                            <tr>
                                <td>{{ count }}</td>
                                <td>{{ da.categoryName }}</td>
                                {# {% if filtertype == 'filterbyitem' %}
                                    <td>{{ da.itemName }} - {{ da.priceVariavtion }}</td>
                                {% elseif filtertype == 'filterbybrand' %}
                                    <td>{{ da.categoryName }}</td>
                                {% endif %} #}
                                <td>{{ da.quantity }}</td>
                                <td>{% if numberFormat == 0 %}{{ da.price|round(2, 'floor')}}{% elseif numberFormat == 1 %}{{ da.price|number_format(2, '.', '') }}{% endif %}</td>
                                <td><a href="{{ path('view_brand_sale',{'id':da.brand}) }}">view</a></td>

                                    
                                </tr>
                {% set count = count + 1 %}
                {% set sales = sales + da.price %}

                            {% endfor %}
                        </tbody>
                    </table>
                    <hr>
                  <b style="color:red;">  Sales : {{ sales }}</b>
                </div>
                <div class="card-body collapse show">
                    
                </div>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block scripts %}

<script>

        {# $('#grocbay').select2({
        selectOnClose: true
        }); #}

         $('#myTable').DataTable();
{# 
         $(document).ready(function() { 
            $('#itemid').show();
            $('#brandid').hide();
         }); #}


        {# function filterBy(checkbox){

            if(checkbox.value == 'filterbyitem'){
                $('#itemid').show();
                $('#brandid').hide();

                $('#reportheader').html('Item Report Filter');

            }else if(checkbox.value == 'filterbybrand'){
                $('#itemid').hide();
                $('#brandid').show();

                $('#reportheader').html('Brand Report Filter');
            }


        } #}

</script>

{% endblock %}